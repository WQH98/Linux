###### 一、PWM简介

1、6ULL的PWM是16位计数器。

2、有4个16位的FIFO。

3、一个12位的分频器。

4、正点原子LCD屏幕的背光IO连接到了GPIO1_IO08。GPIO1_IO08可以复用为PWM1_OUT信号。

5、PWM计数器从0x0000开始计数，当计数器的值等于PWM_PWMPR + 1的时候，定时器就会重新开始下一个周期的运行，因此PWMPR寄存器控制着PWM频率。

6、FIFO保存着采样值，当我们向PWMSAR寄存器写采样值的时候，会写到FIFO里面，每当读取一次PWMSAR寄存器，FIFO里面的数据都会减1，或者每产生一个PWM信号，FIFO的数据也会减1，直到FIFO为空，那么就无法再产生PWM信号。FIFO为空的时候会产生中断，我们可以在中断中向FIFO写入采样数据，也就是向PWMSAR写数据。

7、PWMCR寄存器，bit0是PWM的使能信号，bit2~1设置为0，每个周期使用FIFO里面的一个数据。bit15~4，PWM分频设置，可以设置0~4095，对应的就是1~4096分频。bit17~16设置PWM时钟源，设置为1，表示使用ipg_clk = 66MHz。bit19~18，设置为0，bit27~26，设置为01，表示当FIFO里面空余位置大于2的时候FIFO为空。

8、PWMIR寄存器，bit0设置为1，开启FIFO空中断。