###### 一、字符设备驱动框架

字符设备驱动的编写主要就是驱动对应的open、close、read。。。。其实就是file_operations结构体的成员变量的实现。

###### 二、驱动模块的记载与卸载

Linux驱动程序可以编译到内核（kernel）里面，也就是zImage，也可以编译为模块，也就是.ko文件，测试的时候只需要加载.ko模块就可以。

编写驱动的时候注意事项！
1、编译驱动的时候需要用到linux内核源码！因此要解压缩linux内核源码，编译linux内核源码，得到zImage和.dtb。需要使用编译后得到的zImage和.dtb启动系统。
2、从SD卡启动，SD卡烧写了uboot。uboot通过tftp从ubuntu里面获取zImage和dtb，rootfs也是通过nfs挂载。
3、设置bootcmd和bootargs。
4、将编译出来的ko文件放到根文件系统里面，加载驱动会用到加载命令：insmod，modprobe。移除驱动使用命令rmmod。对于一个新的模块使用modprobe加载的时候需要先调用depmod命令。
5、驱动模块加载成功以后可以使用lsmod查看。
6、卸载模块使用rmmod命令。

###### 三、字符设备的注册与注销

