1、uboot下载系统失败，以前都能成功，突然不能下载了，怎么解决？
首先，保证整个网段内开发板的IP地址和ubuntu的IP地址是唯一的，测试哪个IP地址有冲突，比如ubuntu的ip地址有没有被其他设备占用。如果有占用，就改一个没被占用的IP地址。

###### 一、地址映射

1、裸机LED灯实验就是直接操作6ULL的寄存器。
2、Linux驱动开发也可以操作寄存器，Linux不能直接对寄存器物理地址进行读写操作，比如寄存器A的物理地址为0x01010101。裸机的时候可以直接对0x01010101这个物理地址进行操作，但是Linux下不行，因为Linux会使能MMU。（STM32不能跑Linux是因为没有MMU，在老版本的Linux中要求处理器必须有MMU，现在的Linux内核已经支持无MMU的处理器了。）MMU完成的主要功能一是完成虚拟空间到物理空间的映射，二是内存保护，设置存储器的访问权限，设置虚拟存储空间的缓冲特性。
3、因为在Linux里面操作的都是虚拟地址，所以需要先得到0x01010101这个物理地址所对应的虚拟地址。
4、Linux内核启动的时候会初始化MMU，设置好内存映射，设置好以后CPU访问的都是虚拟地址。
5、获得物理地址所对应的虚拟地址使用ioremap函数。第一个参数就是物理地址起始大小，第二个参数就是要转化的字节数量。va = ioremap(0x01010101, 10)代表的意思是从0x01010101开始的10个地址进行转换，va就是得到的虚拟地址。

```c
#define ioremap(cookie,size) __arm_ioremap((cookie), (size),  MT_DEVICE)
```

6、卸载驱动的时候，iounmap(va);

```c
void iounmap(volatile void __iomem *addr);
```

###### 二、LED灯字符设备驱动框架搭建

1、初始化时钟、IO、GPIO等等。
2、初始化完成以后进行测试，但是如果你现在使用的是正点原子提供的Linux内核，这个时候LED灯默认被配置为了心跳灯，必须关闭心跳灯。

###### 三、测试

1、加载驱动modprobe led.ko。
2、创建设备节点 mknod /dev/led c 200 0（设备节点名称/dev/led，c是字符节点，200是主设备号，0是次设备号）。
3、测试./led_app /dev/led 0关灯，./led_app /dev/led 1开灯