###### 一、并发与竞争简介

1、什么是并发与竞争

线程、中断、多核、抢占等等。

2、保护的是什么东西

保护的是数据。

###### 二、并发与竞争解决办法

1、原子操作

原子变量与原子位

2、自旋锁

①、用于多核SMP。
②、使用自旋锁要注意死锁现象的发生。
③、线程与线程、线程与中断。

3、信号量

①、因为信号量可以使等待资源线程进入休眠状态，因此适用于哪些占用资源较久的场合。
②、因此信号量不能用于中断中，因为信号量会引起休眠，终端不能休眠。
③、如果共享资源的持有时间比较短，那么就不适合使用信号量了，因为频繁的休眠、切换线程引起的开销要远大于信号量带来的优势。

4、互斥体

①、mutex可以导致休眠，因此不能在中断中使用mutex，中断中只能使用自旋锁。
②、和信号量一样，mutex保护的临界区可以调用引起阻塞的API函数。
③、因为一次只有一个线程可以持有mutex，因此，必须由mutex的持有者释放mutex，并且mutex不能递归上锁和解锁。